{"formId":"reportNBT4Part","name":"นบ./4 รายงานการทดสอบปริมาณน้ำ (ช่างเจาะ)","json":"{\"className\":\"org.joget.apps.form.model.Form\",\"properties\":{\"noPermissionMessage\":\"\",\"loadBinder\":{\"className\":\"org.joget.apps.form.lib.WorkflowFormBinder\",\"properties\":{}},\"name\":\"นบ.\\/4 รายงานการทดสอบปริมาณน้ำ (ช่างเจาะ)\",\"description\":\"\",\"postProcessorRunOn\":\"create\",\"permission\":{\"className\":\"\",\"properties\":{}},\"id\":\"reportNBT4Part\",\"postProcessor\":{\"className\":\"\",\"properties\":{}},\"storeBinder\":{\"className\":\"org.joget.apps.form.lib.WorkflowFormBinder\",\"properties\":{}},\"tableName\":\"dgr_nbt4\"},\"elements\":[{\"elements\":[{\"elements\":[{\"className\":\"org.joget.apps.form.lib.HiddenField\",\"properties\":{\"useDefaultWhenEmpty\":\"true\",\"workflowVariable\":\"\",\"id\":\"processID\",\"value\":\"#assignment.processId#\"}},{\"className\":\"org.joget.apps.form.lib.HiddenField\",\"properties\":{\"useDefaultWhenEmpty\":\"true\",\"workflowVariable\":\"\",\"id\":\"recordID\",\"value\":\"#process.recordId#\"}},{\"className\":\"org.joget.apps.form.lib.HiddenField\",\"properties\":{\"useDefaultWhenEmpty\":\"true\",\"workflowVariable\":\"\",\"id\":\"activityID\",\"value\":\"#assignment.activityId#\"}},{\"className\":\"org.joget.apps.form.lib.HiddenField\",\"properties\":{\"useDefaultWhenEmpty\":\"true\",\"workflowVariable\":\"\",\"id\":\"activityDefID\",\"value\":\"#assignment.activityDefId#\"}}],\"className\":\"org.joget.apps.form.model.Column\",\"properties\":{\"width\":\"100%\"}}],\"className\":\"org.joget.apps.form.model.Section\",\"properties\":{\"visibilityControl\":\"\",\"permissionReadonly\":\"\",\"permission\":{\"className\":\"\",\"properties\":{}},\"label\":\"\",\"reverse\":\"\",\"storeBinder\":{\"className\":\"\",\"properties\":{}},\"visibilityValue\":\"\",\"regex\":\"\",\"readonly\":\"\",\"loadBinder\":{\"className\":\"\",\"properties\":{}},\"comment\":\"\",\"id\":\"sectionHidden_1\",\"join\":\"\",\"readonlyLabel\":\"\"}},{\"elements\":[{\"elements\":[{\"className\":\"org.joget.apps.form.lib.DatePicker\",\"properties\":{\"yearRange\":\"c-10:c+10\",\"dataFormat\":\"yyyy-MM-dd\",\"startDateFieldId\":\"\",\"validator\":{\"className\":\"\",\"properties\":{}},\"format\":\"dd\\/mm\\/yy\",\"label\":\"ทำการทดสอบบริมาณน้ำ วันที่\",\"datePickerType\":\"\",\"currentDateAs\":\"\",\"endDateFieldId\":\"\",\"readonly\":\"\",\"allowManual\":\"\",\"workflowVariable\":\"\",\"id\":\"testWaterDate\",\"placeholder\":\"\",\"value\":\"#date.yyyy-MM-dd#\",\"readonlyLabel\":\"\"}}],\"className\":\"org.joget.apps.form.model.Column\",\"properties\":{\"horizontal\":\"\",\"customWidth\":\"\",\"width\":\"100%\",\"label\":\"\"}}],\"className\":\"org.joget.apps.form.model.Section\",\"properties\":{\"visibilityControl\":\"\",\"permissionReadonly\":\"\",\"permission\":{\"className\":\"\",\"properties\":{}},\"label\":\"รายงานการทดสอบปริมาณน้ำ\",\"reverse\":\"\",\"storeBinder\":{\"className\":\"\",\"properties\":{}},\"visibilityValue\":\"\",\"regex\":\"\",\"readonly\":\"\",\"loadBinder\":{\"className\":\"\",\"properties\":{}},\"comment\":\"\",\"id\":\"section1\",\"join\":\"\",\"readonlyLabel\":\"\"}},{\"elements\":[{\"elements\":[{\"className\":\"org.joget.apps.form.lib.TextField\",\"properties\":{\"maxlength\":\"\",\"permission_rules\":{},\"validator\":{\"className\":\"\",\"properties\":{}},\"label\":\"ความลึก (เมตร)\",\"encryption\":\"\",\"size\":\"\",\"readonly\":\"\",\"workflowVariable\":\"\",\"style\":\"\",\"id\":\"wellDepth\",\"placeholder\":\"\",\"value\":\"\",\"readonlyLabel\":\"\",\"storeNumeric\":\"\"}}],\"className\":\"org.joget.apps.form.model.Column\",\"properties\":{\"horizontal\":\"\",\"customWidth\":\"\",\"width\":\"100%\",\"label\":\"รายละเอียดบ่อน้ำบาดาล\"}}],\"className\":\"org.joget.apps.form.model.Section\",\"properties\":{\"visibilityControl\":\"\",\"permissionReadonly\":\"\",\"permission\":{\"className\":\"\",\"properties\":{}},\"label\":\"\",\"reverse\":\"\",\"storeBinder\":{\"className\":\"\",\"properties\":{}},\"visibilityValue\":\"\",\"regex\":\"\",\"readonly\":\"\",\"loadBinder\":{\"className\":\"\",\"properties\":{}},\"comment\":\"\",\"id\":\"section2\",\"join\":\"\",\"readonlyLabel\":\"\"}},{\"elements\":[{\"elements\":[{\"className\":\"org.joget.plugin.enterprise.SpreadSheetGrid\",\"properties\":{\"showRowNumber\":\"true\",\"validateMaxRow\":\"\",\"disabledDelete\":\"\",\"validateMinRow\":\"\",\"validator\":{\"className\":\"\",\"properties\":{}},\"errorMessage\":\"Invalid number of rows\",\"fixedColumnsLeft\":\"0\",\"label\":\"ข้อมูลท่อกรุ\",\"headerSorting\":\"true\",\"storeBinder\":{\"className\":\"\",\"properties\":{}},\"minSpareRows\":\"1\",\"sortingField\":\"\",\"readonly\":\"\",\"loadBinder\":{\"className\":\"\",\"properties\":{}},\"disabledAdd\":\"\",\"maxHeight\":\"\",\"options\":[{\"readonly\":\"\",\"format\":\"\",\"width\":\"\",\"regexValidator\":\"\",\"formula\":\"\",\"label\":\"ขนาดท่อกรุ\",\"formatType\":\"\",\"value\":\"pipeSize\"},{\"readonly\":\"\",\"format\":\"\",\"width\":\"\",\"regexValidator\":\"\",\"formula\":\"\",\"label\":\"จากระยะ (เมตร)\",\"formatType\":\"\",\"value\":\"pipeFrom\"},{\"readonly\":\"\",\"format\":\"\",\"width\":\"\",\"regexValidator\":\"\",\"formula\":\"\",\"label\":\"ถึง (เมตร)\",\"formatType\":\"\",\"value\":\"pipeTo\"}],\"customSettings\":\"\",\"id\":\"pipeDetail\"}},{\"className\":\"org.joget.plugin.enterprise.SpreadSheetGrid\",\"properties\":{\"showRowNumber\":\"true\",\"validateMaxRow\":\"\",\"disabledDelete\":\"\",\"validateMinRow\":\"\",\"validator\":{\"className\":\"\",\"properties\":{}},\"errorMessage\":\"Invalid number of rows\",\"fixedColumnsLeft\":\"0\",\"label\":\"ข้อมูลขนาดท่อกรองหรือท่อเซาะร่อง\",\"headerSorting\":\"true\",\"storeBinder\":{\"className\":\"\",\"properties\":{}},\"minSpareRows\":\"1\",\"sortingField\":\"\",\"readonly\":\"\",\"loadBinder\":{\"className\":\"\",\"properties\":{}},\"disabledAdd\":\"\",\"maxHeight\":\"\",\"options\":[{\"readonly\":\"\",\"format\":\"\",\"width\":\"\",\"regexValidator\":\"\",\"formula\":\"\",\"label\":\"ขนาดท่อกรองหรือท่อเซาะร่อง\",\"formatType\":\"\",\"value\":\"filterSize\"},{\"readonly\":\"\",\"format\":\"\",\"width\":\"\",\"regexValidator\":\"\",\"formula\":\"\",\"label\":\"จากระยะ (เมตร)\",\"formatType\":\"\",\"value\":\"filterFrom\"},{\"readonly\":\"\",\"format\":\"\",\"width\":\"\",\"regexValidator\":\"\",\"formula\":\"\",\"label\":\"ถึง (เมตร)\",\"formatType\":\"\",\"value\":\"filterTo\"}],\"customSettings\":\"\",\"id\":\"filterDetail\"}}],\"className\":\"org.joget.apps.form.model.Column\",\"properties\":{\"width\":\"100%\"}}],\"className\":\"org.joget.apps.form.model.Section\",\"properties\":{\"visibilityControl\":\"\",\"permissionReadonly\":\"\",\"permission\":{\"className\":\"\",\"properties\":{}},\"label\":\"\",\"reverse\":\"\",\"storeBinder\":{\"className\":\"\",\"properties\":{}},\"visibilityValue\":\"\",\"regex\":\"\",\"readonly\":\"\",\"loadBinder\":{\"className\":\"\",\"properties\":{}},\"comment\":\"\",\"id\":\"section3\",\"join\":\"\",\"readonlyLabel\":\"\"}},{\"elements\":[{\"elements\":[{\"className\":\"org.joget.apps.form.lib.TextField\",\"properties\":{\"maxlength\":\"\",\"validator\":{\"className\":\"\",\"properties\":{}},\"label\":\"ชนิดเครื่องสูบที่ใช้ทดสอบปริมาณน้ำ\",\"encryption\":\"\",\"size\":\"\",\"readonly\":\"\",\"workflowVariable\":\"\",\"style\":\"\",\"id\":\"pumpType\",\"placeholder\":\"\",\"value\":\"\",\"readonlyLabel\":\"\",\"storeNumeric\":\"\"}}],\"className\":\"org.joget.apps.form.model.Column\",\"properties\":{\"horizontal\":\"\",\"customWidth\":\"\",\"width\":\"100%\",\"label\":\"รายละเอียดเครื่องสูบน้ำบาดาลที่ใช้ทดสอบ\"}}],\"className\":\"org.joget.apps.form.model.Section\",\"properties\":{\"visibilityControl\":\"\",\"permissionReadonly\":\"\",\"permission\":{\"className\":\"\",\"properties\":{}},\"label\":\"\",\"reverse\":\"\",\"storeBinder\":{\"className\":\"\",\"properties\":{}},\"visibilityValue\":\"\",\"regex\":\"\",\"readonly\":\"\",\"loadBinder\":{\"className\":\"\",\"properties\":{}},\"comment\":\"\",\"id\":\"section4\",\"join\":\"\",\"readonlyLabel\":\"\"}},{\"elements\":[{\"elements\":[{\"className\":\"org.joget.apps.form.lib.TextField\",\"properties\":{\"maxlength\":\"\",\"validator\":{\"className\":\"\",\"properties\":{}},\"label\":\"ยี่ห้อ\",\"encryption\":\"\",\"size\":\"\",\"readonly\":\"\",\"workflowVariable\":\"\",\"style\":\"\",\"id\":\"pumpBrand\",\"placeholder\":\"\",\"value\":\"\",\"readonlyLabel\":\"\",\"storeNumeric\":\"\"}},{\"className\":\"org.joget.apps.form.lib.TextField\",\"properties\":{\"maxlength\":\"\",\"validator\":{\"className\":\"\",\"properties\":{}},\"label\":\"ขนาดท่อดูด (มิลลิเมตร)\",\"encryption\":\"\",\"size\":\"\",\"readonly\":\"\",\"workflowVariable\":\"\",\"style\":\"\",\"id\":\"suctionPipeSize\",\"placeholder\":\"\",\"value\":\"\",\"readonlyLabel\":\"\",\"storeNumeric\":\"\"}}],\"className\":\"org.joget.apps.form.model.Column\",\"properties\":{\"width\":\"49%\"}},{\"elements\":[{\"className\":\"org.joget.apps.form.lib.TextField\",\"properties\":{\"maxlength\":\"\",\"validator\":{\"className\":\"\",\"properties\":{}},\"label\":\"ขับเคลื่อนด้วย\",\"encryption\":\"\",\"size\":\"\",\"readonly\":\"\",\"workflowVariable\":\"\",\"style\":\"\",\"id\":\"drivenBy\",\"placeholder\":\"\",\"value\":\"\",\"readonlyLabel\":\"\",\"storeNumeric\":\"\"}},{\"className\":\"org.joget.apps.form.lib.TextField\",\"properties\":{\"maxlength\":\"\",\"validator\":{\"className\":\"\",\"properties\":{}},\"label\":\"ลงท่อดูดลึก (เมตร)\",\"encryption\":\"\",\"readonly\":\"\",\"size\":\"\",\"workflowVariable\":\"\",\"style\":\"\",\"id\":\"suctionPipeDepth\",\"placeholder\":\"\",\"value\":\"\",\"readonlyLabel\":\"\",\"storeNumeric\":\"\"}}],\"className\":\"org.joget.apps.form.model.Column\",\"properties\":{\"width\":\"49%\"}}],\"className\":\"org.joget.apps.form.model.Section\",\"properties\":{\"visibilityControl\":\"\",\"permissionReadonly\":\"\",\"permission\":{\"className\":\"\",\"properties\":{}},\"label\":\"\",\"reverse\":\"\",\"storeBinder\":{\"className\":\"\",\"properties\":{}},\"visibilityValue\":\"\",\"regex\":\"\",\"readonly\":\"\",\"loadBinder\":{\"className\":\"\",\"properties\":{}},\"comment\":\"\",\"id\":\"section5\",\"join\":\"\",\"readonlyLabel\":\"\"}},{\"elements\":[{\"elements\":[{\"className\":\"org.joget.apps.form.lib.TextField\",\"properties\":{\"maxlength\":\"\",\"validator\":{\"className\":\"\",\"properties\":{}},\"label\":\"ระดับน้ำปกติก่อนสูบ (เมตร)\",\"encryption\":\"\",\"readonly\":\"\",\"size\":\"\",\"workflowVariable\":\"\",\"style\":\"\",\"id\":\"waterLevelBefore\",\"placeholder\":\"\",\"value\":\"\",\"readonlyLabel\":\"\",\"storeNumeric\":\"\"}},{\"className\":\"org.joget.apps.form.lib.TextField\",\"properties\":{\"maxlength\":\"\",\"validator\":{\"className\":\"\",\"properties\":{}},\"label\":\"อัตราการสูบ (ลูกบาศก์เมตร\\/ชั่วโมง)\",\"encryption\":\"\",\"readonly\":\"\",\"size\":\"\",\"workflowVariable\":\"\",\"style\":\"\",\"id\":\"pumpRate\",\"placeholder\":\"\",\"value\":\"\",\"readonlyLabel\":\"\",\"storeNumeric\":\"\"}},{\"className\":\"org.joget.apps.form.lib.TextField\",\"properties\":{\"maxlength\":\"\",\"validator\":{\"className\":\"\",\"properties\":{}},\"label\":\"ระยะน้ำลด\",\"encryption\":\"\",\"readonly\":\"\",\"size\":\"\",\"workflowVariable\":\"\",\"style\":\"\",\"id\":\"reducedWater\",\"placeholder\":\"\",\"value\":\"\",\"readonlyLabel\":\"\",\"storeNumeric\":\"\"}},{\"className\":\"org.joget.apps.form.lib.Radio\",\"properties\":{\"controlField\":\"\",\"readonly\":\"\",\"optionsBinder\":{\"className\":\"\",\"properties\":{}},\"options\":[{\"label\":\"Flowmeter\",\"value\":\"flowmeter\",\"grouping\":\"\"},{\"label\":\"Orifice\",\"value\":\"orifice\",\"grouping\":\"\"},{\"label\":\"Weir\",\"value\":\"weir\",\"grouping\":\"\"},{\"label\":\"ตวง\",\"value\":\"ตวง\",\"grouping\":\"\"},{\"label\":\"อื่นๆ\",\"value\":\"อื่นๆ\",\"grouping\":\"\"}],\"validator\":{\"className\":\"\",\"properties\":{}},\"workflowVariable\":\"\",\"label\":\"วิธีวัดปริมาณน้ำ\",\"id\":\"waterMeasurement\",\"value\":\"\",\"readonlyLabel\":\"\"}}],\"className\":\"org.joget.apps.form.model.Column\",\"properties\":{\"horizontal\":\"\",\"customWidth\":\"\",\"width\":\"100%\",\"label\":\"สรุปผลการทดสอบ\"}}],\"className\":\"org.joget.apps.form.model.Section\",\"properties\":{\"visibilityControl\":\"\",\"permissionReadonly\":\"\",\"permission\":{\"className\":\"\",\"properties\":{}},\"label\":\"\",\"reverse\":\"\",\"storeBinder\":{\"className\":\"\",\"properties\":{}},\"visibilityValue\":\"\",\"regex\":\"\",\"readonly\":\"\",\"loadBinder\":{\"className\":\"\",\"properties\":{}},\"comment\":\"\",\"id\":\"section6\",\"join\":\"\",\"readonlyLabel\":\"\"}},{\"elements\":[{\"elements\":[{\"className\":\"org.joget.apps.form.lib.TextField\",\"properties\":{\"maxlength\":\"\",\"validator\":{\"className\":\"\",\"properties\":{}},\"label\":\"โปรดระบุ\",\"encryption\":\"\",\"readonly\":\"\",\"size\":\"\",\"workflowVariable\":\"\",\"style\":\"\",\"id\":\"waterMeasurementOther\",\"placeholder\":\"\",\"value\":\"\",\"readonlyLabel\":\"\",\"storeNumeric\":\"\"}}],\"className\":\"org.joget.apps.form.model.Column\",\"properties\":{\"width\":\"100%\"}}],\"className\":\"org.joget.apps.form.model.Section\",\"properties\":{\"visibilityControl\":\"waterMeasurement\",\"permissionReadonly\":\"\",\"permission\":{\"className\":\"\",\"properties\":{}},\"label\":\"\",\"reverse\":\"\",\"storeBinder\":{\"className\":\"\",\"properties\":{}},\"visibilityValue\":\"อื่นๆ\",\"regex\":\"\",\"readonly\":\"\",\"loadBinder\":{\"className\":\"\",\"properties\":{}},\"comment\":\"\",\"id\":\"section7\",\"join\":\"\",\"readonlyLabel\":\"\"}},{\"elements\":[{\"elements\":[{\"className\":\"org.joget.apps.form.lib.TextField\",\"properties\":{\"maxlength\":\"\",\"validator\":{\"className\":\"\",\"properties\":{}},\"label\":\"วัดจากปากบ่อซึ่งอยู่เหนือระดับพื้นดินเดิม (เมตร)\",\"encryption\":\"\",\"readonly\":\"\",\"size\":\"\",\"workflowVariable\":\"\",\"style\":\"\",\"id\":\"originalGroundLevel\",\"placeholder\":\"\",\"value\":\"\",\"readonlyLabel\":\"\",\"storeNumeric\":\"\"}}],\"className\":\"org.joget.apps.form.model.Column\",\"properties\":{\"horizontal\":\"\",\"customWidth\":\"\",\"width\":\"100%\",\"label\":\"การวัดระดับ\"}}],\"className\":\"org.joget.apps.form.model.Section\",\"properties\":{\"visibilityControl\":\"\",\"permissionReadonly\":\"\",\"permission\":{\"className\":\"\",\"properties\":{}},\"label\":\"\",\"reverse\":\"\",\"storeBinder\":{\"className\":\"\",\"properties\":{}},\"visibilityValue\":\"\",\"regex\":\"\",\"readonly\":\"\",\"loadBinder\":{\"className\":\"\",\"properties\":{}},\"comment\":\"\",\"id\":\"section8\",\"join\":\"\",\"readonlyLabel\":\"\"}},{\"elements\":[{\"elements\":[{\"className\":\"org.joget.plugin.enterprise.SpreadSheetGrid\",\"properties\":{\"showRowNumber\":\"true\",\"validateMaxRow\":\"\",\"disabledDelete\":\"true\",\"validateMinRow\":\"\",\"validator\":{\"className\":\"\",\"properties\":{}},\"errorMessage\":\"Invalid number of rows\",\"fixedColumnsLeft\":\"0\",\"label\":\"\",\"headerSorting\":\"true\",\"storeBinder\":{\"className\":\"org.joget.plugin.enterprise.MultirowFormBinder\",\"properties\":{\"formDefId\":\"reportNBT4Pump\",\"foreignKey\":\"parentID\"}},\"minSpareRows\":\"0\",\"sortingField\":\"\",\"readonly\":\"\",\"loadBinder\":{\"className\":\"org.joget.apps.form.lib.BeanShellFormBinder\",\"properties\":{\"autoHandleWorkflowVariable\":\"\",\"useAjax\":\"\",\"cacheInterval\":\"\",\"script\":\"import java.time.LocalDate;\\r\\nimport java.text.ParseException;\\r\\nimport javax.servlet.http.HttpServletRequest;\\r\\nimport javax.sql.DataSource;\\r\\nimport org.joget.apps.app.model.AppDefinition;\\r\\nimport org.joget.apps.app.service.AppService;\\r\\nimport org.joget.apps.app.service.AppUtil;\\r\\nimport org.joget.commons.util.LogUtil;\\r\\nimport org.joget.workflow.model.service.WorkflowManager;\\r\\nimport org.joget.workflow.model.WorkflowAssignment;\\r\\nimport org.joget.workflow.model.WorkflowProcess;\\r\\nimport org.joget.workflow.model.WorkflowProcessResult;\\r\\nimport org.joget.workflow.model.WorkflowVariable;\\r\\n\\r\\nimport org.joget.apps.form.model.*;\\r\\nimport org.joget.apps.form.service.*;\\r\\nimport java.sql.*;\\r\\nimport java.util.*;\\r\\nimport java.lang.Exception;\\r\\n    \\r\\nConnection con = null;\\r\\n\\r\\nString dbName = \\\"jwdb\\\";\\r\\nString tableName = \\\"app_fd_dgr_nbt4_pump\\\";\\r\\n\\r\\n\\r\\nFormRowSet f = new FormRowSet();\\r\\nf.setMultiRow(true);\\r\\n\\r\\nDataSource ds = (DataSource)AppUtil.getApplicationContext().getBean(\\\"setupDataSource\\\");\\r\\ncon = ds.getConnection();\\r\\n\\r\\nif(!con.isClosed()){\\r\\n\\r\\n    String sql = \\\"SELECT id,c_pumpTime AS pumpTime,c_reducedWater AS reducedWater,c_pondLevel AS pondLevel,c_pumpTimeAfter AS pumpTimeAfter FROM \\\" + dbName+ \\\".\\\" + tableName + \\\" WHERE c_parentID = ? ORDER BY dateCreated ASC;\\\";\\r\\n    PreparedStatement stmt = con.prepareStatement(sql);\\r\\n    stmt.setString(1, \\\"#process.recordId#\\\");\\r\\n    ResultSet rs = stmt.executeQuery();\\r\\n\\r\\n    int num = 0;  \\r\\n    while (rs.next()) {\\r\\n\\r\\n        num++;\\r\\n        \\/\\/ LogUtil.info(\\\"query\\\", \\\"num : \\\" + num + \\\" | pumpTimeAfter : \\\" + rs.getString(\\\"pumpTimeAfter\\\") );\\r\\n        FormRow r1 = new FormRow();\\r\\n        r1.put(\\\"id\\\", rs.getString(\\\"id\\\") );\\r\\n        r1.put(\\\"pumpTime\\\", rs.getString(\\\"pumpTime\\\") );\\r\\n        r1.put(\\\"pumpTimeAfter\\\", rs.getString(\\\"pumpTimeAfter\\\") );\\r\\n        r1.put(\\\"pondLevel\\\", rs.getString(\\\"pondLevel\\\") );\\r\\n        r1.put(\\\"reducedWater\\\", rs.getString(\\\"reducedWater\\\") );\\r\\n\\r\\n        f.add(r1);\\r\\n    }\\r\\n    con.close();\\r\\n\\r\\n    if(num == 0){\\r\\n        \\/\\/ LogUtil.info(\\\"query\\\", \\\"num : \\\" + num + \\\" | New Row \\\");\\r\\n        String[] time_a = {\\\"00\\\", \\\"10\\\", \\\"20\\\", \\\"30\\\", \\\"45\\\", \\\"60\\\", \\\"80\\\", \\\"100\\\", \\\"120\\\", \\\"150\\\", \\\"180\\\", \\\"225\\\", \\\"270\\\", \\\"315\\\", \\\"360\\\"};\\r\\n        for (String value_time : time_a) {\\r\\n            FormRow r1 = new FormRow();\\r\\n            r1.put(\\\"pumpTimeAfter\\\", value_time);\\r\\n            f.add(r1);\\r\\n        }\\r\\n    }\\r\\n\\r\\n    return f;\\r\\n\\r\\n}\",\"autoHandleFiles\":\"\"}},\"disabledAdd\":\"true\",\"maxHeight\":\"\",\"options\":[{\"readonly\":\"\",\"format\":\"\",\"width\":\"\",\"regexValidator\":\"\",\"formula\":\"\",\"label\":\"id\",\"formatType\":\"hidden\",\"value\":\"id\"},{\"readonly\":\"\",\"format\":\"HH:mm\",\"width\":\"\",\"regexValidator\":\"\",\"formula\":\"\",\"label\":\"เวลา\",\"formatType\":\"time\",\"value\":\"pumpTime\"},{\"readonly\":\"true\",\"format\":\"\",\"width\":\"\",\"regexValidator\":\"\",\"formula\":\"\",\"label\":\"เวลาหลังการสูบน้ำ (นาที)\",\"formatType\":\"\",\"value\":\"pumpTimeAfter\"},{\"readonly\":\"\",\"format\":\"reportNBT4Pump\",\"width\":\"\",\"regexValidator\":\"\",\"formula\":\"\",\"label\":\"ระดับน้ำในบ่อ (เมตร)\",\"formatType\":\"\",\"value\":\"pondLevel\"},{\"readonly\":\"\",\"format\":\"reportNBT4Pump\",\"width\":\"\",\"regexValidator\":\"\",\"formula\":\"\",\"label\":\"ระยะน้ำลด (เมตร)\",\"formatType\":\"\",\"value\":\"reducedWater\"}],\"customSettings\":\"\",\"id\":\"subPump\"}},{\"className\":\"org.joget.apps.form.lib.CustomHTML\",\"properties\":{\"autoPopulate\":\"\",\"label\":\"\",\"id\":\"field53\",\"value\":\"<p>\\r\\n<b>หมายเหตุ<\\/b><br> \\r\\n1) ระยะน้ำลด = ระดับน้ำในบ่อ (ที่วัดในขณะนั้น ๆ) – ระดับน้ำปกติก่อนสูบ<br>\\r\\n2) ให้วัดระดับน้ำขณะทำการสูบตามเวลาที่กำหนดในรายการข้างบน เป็นเวลาต่อเนื่องกันไม่น้อยกว่า 6 ชั่วโมง<br>\\r\\n3) หากทำการทดสอบปริมาณน้ำด้วยวิธีการเปลี่ยนแปลงอัตราการสูบน้ำ (Step drawdown test) ให้แนบรายละเอียดการทดสอบ ซึ่งต้องดำเนินการต่อเนื่องกันเป็นเวลาไม่น้อยกว่า 12 ชั่วโมงมาต่างหาก โดยยกเว้นการดำเนินการตามข้อ 10 <br>\\r\\n<\\/p>\"}}],\"className\":\"org.joget.apps.form.model.Column\",\"properties\":{\"horizontal\":\"\",\"customWidth\":\"\",\"width\":\"100%\",\"label\":\"\"}}],\"className\":\"org.joget.apps.form.model.Section\",\"properties\":{\"visibilityControl\":\"\",\"permissionReadonly\":\"\",\"permission\":{\"className\":\"\",\"properties\":{}},\"label\":\"รายละเอียดการทดสอบขณะทำการสูบน้ำจากบ่อน้ำบาดาล\",\"reverse\":\"\",\"storeBinder\":{\"className\":\"\",\"properties\":{}},\"visibilityValue\":\"\",\"regex\":\"\",\"readonly\":\"\",\"loadBinder\":{\"className\":\"\",\"properties\":{}},\"comment\":\"\",\"id\":\"section9\",\"join\":\"\",\"readonlyLabel\":\"\"}},{\"elements\":[{\"elements\":[{\"className\":\"org.joget.plugin.enterprise.SpreadSheetGrid\",\"properties\":{\"id\":\"subRecovery\",\"label\":\"\",\"options\":[{\"value\":\"id\",\"label\":\"id\",\"formatType\":\"hidden\",\"format\":\"\",\"regexValidator\":\"\",\"formula\":\"\",\"width\":\"\",\"readonly\":\"\"},{\"value\":\"recoveryTime\",\"label\":\"เวลา\",\"formatType\":\"time\",\"format\":\"HH:mm\",\"regexValidator\":\"\",\"formula\":\"\",\"width\":\"\",\"readonly\":\"\"},{\"value\":\"pumpTimeAfter\",\"label\":\"เวลาหลังการหยุดสูบน้ำ (นาที)\",\"formatType\":\"\",\"format\":\"\",\"regexValidator\":\"\",\"formula\":\"\",\"width\":\"\",\"readonly\":\"true\"},{\"value\":\"pondLevel\",\"label\":\"ระดับน้ำในบ่อ (เมตร)\",\"formatType\":\"\",\"format\":\"reportNBT4Recovery\",\"regexValidator\":\"\",\"formula\":\"\",\"width\":\"\",\"readonly\":\"\"},{\"value\":\"recoveryWater\",\"label\":\"ระยะน้ำคืนตัว\",\"formatType\":\"\",\"format\":\"reportNBT4Recovery\",\"regexValidator\":\"\",\"formula\":\"\",\"width\":\"\",\"readonly\":\"\"}],\"headerSorting\":\"true\",\"sortingField\":\"\",\"readonly\":\"\",\"disabledAdd\":\"true\",\"disabledDelete\":\"true\",\"showRowNumber\":\"true\",\"fixedColumnsLeft\":\"0\",\"minSpareRows\":\"0\",\"maxHeight\":\"\",\"customSettings\":\"\",\"validator\":{\"className\":\"\",\"properties\":{}},\"validateMinRow\":\"\",\"validateMaxRow\":\"\",\"errorMessage\":\"Invalid number of rows\",\"loadBinder\":{\"className\":\"org.joget.apps.form.lib.BeanShellFormBinder\",\"properties\":{\"script\":\"import java.time.LocalDate;\\r\\nimport java.text.ParseException;\\r\\nimport javax.servlet.http.HttpServletRequest;\\r\\nimport javax.sql.DataSource;\\r\\nimport org.joget.apps.app.model.AppDefinition;\\r\\nimport org.joget.apps.app.service.AppService;\\r\\nimport org.joget.apps.app.service.AppUtil;\\r\\nimport org.joget.commons.util.LogUtil;\\r\\nimport org.joget.workflow.model.service.WorkflowManager;\\r\\nimport org.joget.workflow.model.WorkflowAssignment;\\r\\nimport org.joget.workflow.model.WorkflowProcess;\\r\\nimport org.joget.workflow.model.WorkflowProcessResult;\\r\\nimport org.joget.workflow.model.WorkflowVariable;\\r\\n\\r\\nimport org.joget.apps.form.model.*;\\r\\nimport org.joget.apps.form.service.*;\\r\\nimport java.sql.*;\\r\\nimport java.util.*;\\r\\nimport java.lang.Exception;\\r\\n    \\r\\nConnection con = null;\\r\\n\\r\\nString dbName = \\\"jwdb\\\";\\r\\nString tableName = \\\"app_fd_dgr_nbt4_recovery\\\";\\r\\n\\r\\n\\r\\nFormRowSet f = new FormRowSet();\\r\\nf.setMultiRow(true);\\r\\n\\r\\nDataSource ds = (DataSource)AppUtil.getApplicationContext().getBean(\\\"setupDataSource\\\");\\r\\ncon = ds.getConnection();\\r\\n\\r\\nif(!con.isClosed()){\\r\\n\\r\\n    String sql = \\\"SELECT id,c_recoveryTime AS recoveryTime,c_recoveryWater AS recoveryWater,c_pondLevel AS pondLevel,c_pumpTimeAfter AS pumpTimeAfter FROM \\\" + dbName+ \\\".\\\" + tableName + \\\" WHERE c_parentID = ? ORDER BY dateCreated ASC;\\\";\\r\\n    PreparedStatement stmt = con.prepareStatement(sql);\\r\\n    stmt.setString(1, \\\"#process.recordId#\\\");\\r\\n    ResultSet rs = stmt.executeQuery();\\r\\n\\r\\n    int num = 0;  \\r\\n    while (rs.next()) {\\r\\n\\r\\n        num++;\\r\\n        \\/\\/ LogUtil.info(\\\"query\\\", \\\"num : \\\" + num + \\\" | pumpTimeAfter : \\\" + rs.getString(\\\"pumpTimeAfter\\\") );\\r\\n        FormRow r1 = new FormRow();\\r\\n        r1.put(\\\"id\\\", rs.getString(\\\"id\\\") );\\r\\n        r1.put(\\\"recoveryTime\\\", rs.getString(\\\"recoveryTime\\\") );\\r\\n        r1.put(\\\"pumpTimeAfter\\\", rs.getString(\\\"pumpTimeAfter\\\") );\\r\\n        r1.put(\\\"pondLevel\\\", rs.getString(\\\"pondLevel\\\") );\\r\\n        r1.put(\\\"recoveryWater\\\", rs.getString(\\\"recoveryWater\\\") );\\r\\n\\r\\n        f.add(r1);\\r\\n    }\\r\\n    con.close();\\r\\n    \\r\\n    if(num == 0){\\r\\n        \\/\\/ LogUtil.info(\\\"query\\\", \\\"num : \\\" + num + \\\" | New Row \\\");\\r\\n        String[] time_a = {\\\"00\\\", \\\"10\\\", \\\"20\\\", \\\"30\\\", \\\"45\\\", \\\"60\\\", \\\"80\\\", \\\"100\\\", \\\"120\\\", \\\"150\\\", \\\"180\\\", \\\"225\\\", \\\"270\\\", \\\"315\\\", \\\"360\\\"};\\r\\n        for (String value_time : time_a) {\\r\\n            FormRow r1 = new FormRow();\\r\\n            r1.put(\\\"pumpTimeAfter\\\", value_time);\\r\\n            f.add(r1);\\r\\n        }\\r\\n    }\\r\\n\\r\\n    return f;\\r\\n\\r\\n}\",\"useAjax\":\"\",\"cacheInterval\":\"\",\"autoHandleWorkflowVariable\":\"\",\"autoHandleFiles\":\"\"}},\"storeBinder\":{\"className\":\"org.joget.plugin.enterprise.MultirowFormBinder\",\"properties\":{\"formDefId\":\"reportNBT4Recovery\",\"foreignKey\":\"parentID\"}}}},{\"className\":\"org.joget.apps.form.lib.CustomHTML\",\"properties\":{\"autoPopulate\":\"\",\"label\":\"\",\"id\":\"field53\",\"value\":\"<p>\\r\\n<b>หมายเหตุ<\\/b><br>\\r\\n1) ระยะน้ำคืนตัว = ระดับน้ำที่วัดครั้งสุดท้ายก่อนหยุดสูบ – ระดับน้ำในบ่อ (ที่วัดในขณะนั้น ๆ )<br>\\r\\n2) เมื่อหยุดทำการสูบน้ำตามข้อ 10 ให้วัดระยะน้ำคืนตัวทันที เป็นเวลาไม่น้อยกว่าระยะที่ทำการสูบหรือจนกระทั่งระยะน้ำคืนตัวถึงระดับน้ำปกติก่อนสูบ<br>\\r\\n<\\/p>\"}}],\"className\":\"org.joget.apps.form.model.Column\",\"properties\":{\"horizontal\":\"\",\"customWidth\":\"\",\"width\":\"100%\",\"label\":\"\"}}],\"className\":\"org.joget.apps.form.model.Section\",\"properties\":{\"visibilityControl\":\"\",\"permissionReadonly\":\"\",\"permission\":{\"className\":\"\",\"properties\":{}},\"label\":\"รายละเอียดระยะน้ำคืนตัว\",\"reverse\":\"\",\"storeBinder\":{\"className\":\"\",\"properties\":{}},\"visibilityValue\":\"\",\"regex\":\"\",\"readonly\":\"\",\"loadBinder\":{\"className\":\"\",\"properties\":{}},\"comment\":\"\",\"id\":\"section10\",\"join\":\"\",\"readonlyLabel\":\"\"}}]}","dateModified":"2020-05-14 10:56:33"}
{"formId":"reviewNBT21","name":"[นบ./21] ตรวจสอบเอกสารและออกใบรับคำขอ","json":"{\"className\":\"org.joget.apps.form.model.Form\",\"properties\":{\"id\":\"reviewNBT21\",\"name\":\"[นบ.\\/21] ตรวจสอบเอกสารและออกใบรับคำขอ\",\"tableName\":\"dgr_revision_license\",\"description\":\"\",\"loadBinder\":{\"className\":\"org.joget.apps.form.lib.WorkflowFormBinder\",\"properties\":{}},\"storeBinder\":{\"className\":\"org.joget.apps.form.lib.WorkflowFormBinder\",\"properties\":{}},\"permission\":{\"className\":\"\",\"properties\":{}},\"noPermissionMessage\":\"\",\"postProcessor\":{\"className\":\"org.joget.apps.app.lib.DatabaseUpdateTool\",\"properties\":{\"jdbcDatasource\":\"default\",\"query\":\"INSERT INTO `app_fd_dgr_revision_li_a`\\r\\n(`id`,\\r\\n`dateCreated`,\\r\\n`dateModified`,\\r\\n`createdBy`,\\r\\n`createdByName`,\\r\\n`modifiedBy`,\\r\\n`modifiedByName`,\\r\\n`c_approver`,\\r\\n`c_approval_date`,\\r\\n`c_parent_id`,\\r\\n`c_remarks`,\\r\\n`c_status`,\\r\\n`c_activityID`,\\r\\n`c_activityDefID`,\\r\\n`c_processID`,\\r\\n`c_activityName`)\\r\\nVALUES\\r\\n(uuid(),\\r\\nnow(),\\r\\nnow(),\\r\\n\\\"#currentUser.username#\\\",\\r\\n\\\"#currentUser.fullName#\\\",\\r\\n\\\"#currentUser.username#\\\",\\r\\n\\\"#currentUser.fullName#\\\",\\r\\n\\\"#currentUser.username#\\\",\\r\\nnow(),\\r\\n\\\"#form.dgr_revision_license.id#\\\",\\r\\n\\\"#form.dgr_revision_license.remarks#\\\",\\r\\n\\\"#form.dgr_revision_license.status#\\\",\\r\\n\\\"#assignment.activityId#\\\",\\r\\n\\\"#assignment.activityDefId#\\\",\\r\\n\\\"#assignment.processId#\\\",\\r\\n\\\"#assignment.activityName#\\\");\"}},\"postProcessorRunOn\":\"both\"},\"elements\":[{\"elements\":[{\"elements\":[{\"className\":\"org.joget.apps.form.lib.SubForm\",\"properties\":{\"parentSubFormId\":\"\",\"permissionHidden\":\"\",\"readonly\":\"true\",\"loadBinder\":{\"className\":\"org.joget.apps.form.lib.WorkflowFormBinder\",\"properties\":{}},\"formDefId\":\"editLicenseGWForEdit\",\"noframe\":\"true\",\"subFormParentId\":\"\",\"id\":\"subNB1\",\"label\":\"\",\"storeBinder\":{\"className\":\"org.joget.apps.form.lib.WorkflowFormBinder\",\"properties\":{}},\"readonlyLabel\":\"\"}}],\"className\":\"org.joget.apps.form.model.Column\",\"properties\":{\"width\":\"100%\"}}],\"className\":\"org.joget.apps.form.model.Section\",\"properties\":{\"visibilityControl\":\"\",\"permissionReadonly\":\"\",\"permission\":{\"className\":\"\",\"properties\":{}},\"label\":\"\",\"reverse\":\"\",\"storeBinder\":{\"className\":\"\",\"properties\":{}},\"visibilityValue\":\"\",\"regex\":\"\",\"readonly\":\"\",\"loadBinder\":{\"className\":\"\",\"properties\":{}},\"comment\":\"\",\"id\":\"section5\",\"join\":\"\",\"readonlyLabel\":\"\"}},{\"elements\":[{\"elements\":[{\"className\":\"org.joget.apps.form.lib.HiddenField\",\"properties\":{\"useDefaultWhenEmpty\":\"true\",\"workflowVariable\":\"\",\"id\":\"reviewerName\",\"value\":\"#currentUser.fullName#\"}},{\"className\":\"org.joget.apps.form.lib.HiddenField\",\"properties\":{\"useDefaultWhenEmpty\":\"true\",\"workflowVariable\":\"\",\"id\":\"reviewerUser\",\"value\":\"#currentUser.user#\"}},{\"className\":\"org.joget.apps.form.lib.HiddenField\",\"properties\":{\"useDefaultWhenEmpty\":\"true\",\"workflowVariable\":\"\",\"id\":\"reviewerSignature\",\"value\":\"\\/jw\\/web\\/client\\/app\\/jusermgnt6\\/3\\/form\\/download\\/setupUserAdditonal\\/#currentUser.username#\\/#form.user_additional.userSignature[{currentUser.username}]#.\"}},{\"className\":\"org.joget.apps.form.lib.HiddenField\",\"properties\":{\"useDefaultWhenEmpty\":\"true\",\"workflowVariable\":\"\",\"id\":\"reviewerPosition\",\"value\":\"\"}},{\"className\":\"org.joget.apps.form.lib.CustomHTML\",\"properties\":{\"autoPopulate\":\"\",\"id\":\"htmlText\",\"label\":\"\",\"value\":\"<div class=\\\"row\\\" style=\\\"padding:20px 0px;\\\">\\r\\n    <div class=\\\"col-md-10 col-md-offset-1\\\">\\r\\n        \\r\\n        <div class=\\\"row\\\">\\r\\n            <div class=\\\"col-md-12 text-center\\\"><hr\\/><\\/div>\\r\\n        <\\/div>\\r\\n        \\r\\n        <div class=\\\"row\\\">\\r\\n            <div class=\\\"col-md-12\\\">\\r\\n                <p class=\\\"text-center\\\"><b>\\r\\n                เฉพาะเจ้าหน้าที่<br\\/>\\r\\n                บันทึกสำหรับเจ้าหน้าที่ผู้รับคำขอ\\r\\n                <\\/b><\\/p>\\r\\n            <\\/div>\\r\\n        <\\/div>\\r\\n      \\r\\n    <\\/div>\\r\\n<\\/div>\\r\\n\\r\\n\"}},{\"className\":\"org.joget.apps.form.lib.CustomHTML\",\"properties\":{\"autoPopulate\":\"\",\"id\":\"htmlText\",\"label\":\"\",\"value\":\"<p><b>1. ได้ตรวจสอบคำขอและเอกสารหรือหลักฐานประกอบคำขอ และได้ออกใบรับคำขอแก่ผู้ยื่นคำขอ\\r\\nพร้อมรับชำระค่าธรรมเนียมแล้ว<\\/b><\\/p>\"}},{\"className\":\"org.joget.apps.form.lib.TextField\",\"properties\":{\"maxlength\":\"\",\"validator\":{\"className\":\"org.joget.apps.form.lib.DefaultValidator\",\"properties\":{\"type\":\"\",\"message\":\"\",\"mandatory\":\"true\"}},\"label\":\"2. ความเห็นของเจ้าหน้าที่\",\"encryption\":\"\",\"size\":\"\",\"readonly\":\"\",\"workflowVariable\":\"\",\"style\":\"\",\"id\":\"reviewerRemarks\",\"placeholder\":\"\",\"value\":\"\",\"readonlyLabel\":\"\",\"storeNumeric\":\"\"}},{\"className\":\"org.joget.apps.form.lib.CustomHTML\",\"properties\":{\"autoPopulate\":\"\",\"id\":\"htmlText\",\"label\":\"\",\"value\":\"\\r\\n<script>\\r\\n$(document).ready( function(){\\r\\n    var layout = \\\"\\\";\\r\\n    var value1 = FormUtil.getValue(\\\"reviewerName\\\");\\r\\n    if(value1){\\r\\n        $( \\\"#reviewerNameDis\\\" ).html( \\\"( \\\" + value1 + \\\" )\\\" );\\r\\n    }\\r\\n    var value2 = FormUtil.getValue(\\\"reviewerSignature\\\");\\r\\n    if(value2){\\r\\n        $( \\\"#reviewerSignatureImg\\\" ).html( \\\"<img width='200' height='80' src='\\\" + value2 + \\\"'\\/>\\\" );\\r\\n    }\\r\\n    var value3 = FormUtil.getValue(\\\"reviewerPosition\\\");\\r\\n    if(value3){\\r\\n       $( \\\"#reviewerPositionDis\\\" ).html( \\\"ตำแหน่ง \\\" + value3  );\\r\\n    }\\r\\n});\\r\\n\\r\\n<\\/script>\\r\\n\\r\\n<div class=\\\"row\\\" style=\\\"padding:20px 0px;\\\">\\r\\n    <div class=\\\"col-md-10 col-md-offset-1\\\">\\r\\n        <div class=\\\"row\\\">\\r\\n            <div class=\\\"col-md-4 text-center\\\">(ลายมือชื่อ)<\\/div>\\r\\n            <div class=\\\"col-md-4 text-center\\\">\\r\\n                <span id=\\\"reviewerSignatureImg\\\"><\\/span><br\\/>\\r\\n                <span id=\\\"reviewerNameDis\\\"><\\/span>\\r\\n                <span id=\\\"reviewerPositionDis\\\"><\\/span>\\r\\n            <\\/div>\\r\\n            <div class=\\\"col-md-4 text-center\\\">เจ้าหน้าที่ผู้รับคำขอ<\\/div>\\r\\n        <\\/div>\\r\\n    <\\/div>\\r\\n<\\/div>\\r\\n\\r\\n\"}}],\"className\":\"org.joget.apps.form.model.Column\",\"properties\":{\"width\":\"100%\"}}],\"className\":\"org.joget.apps.form.model.Section\",\"properties\":{\"visibilityControl\":\"\",\"permissionReadonly\":\"\",\"permission\":{\"className\":\"\",\"properties\":{}},\"label\":\"\",\"reverse\":\"\",\"storeBinder\":{\"className\":\"\",\"properties\":{}},\"visibilityValue\":\"\",\"regex\":\"\",\"readonly\":\"\",\"loadBinder\":{\"className\":\"\",\"properties\":{}},\"comment\":\"\",\"id\":\"sectionHidden\",\"join\":\"\",\"readonlyLabel\":\"\"}},{\"elements\":[{\"elements\":[{\"className\":\"org.joget.apps.form.lib.SubForm\",\"properties\":{\"parentSubFormId\":\"subAcceptRegister\",\"readonly\":\"\",\"loadBinder\":{\"className\":\"org.joget.tutorial.JdbcLoadBinder\",\"properties\":{\"autoHandleWorkflowVariable\":\"\",\"jdbcDatasource\":\"default\",\"sql\":\"SELECT\\r\\na.c_usageLicenseName AS licenseeFullname\\r\\n,b.c_licenseType AS licenseType\\r\\n,d.c_phoneNumber AS tel\\r\\n,d.c_fax AS faxNumber\\r\\n,d.c_email AS email\\r\\n,Concat(\\r\\n\\t\\\"เลขที่ \\\",IFNULL(c.c_addressNo, \\\"-\\\")\\r\\n    ,\\\" หมู่ที่ \\\",IFNULL(c.c_moo,\\\"-\\\")\\r\\n    ,\\\" ตรอก\\/ซอย \\\",IFNULL(c.c_soi,\\\"-\\\")\\r\\n    ,\\\" ถนน \\\",IFNULL(c.c_street,\\\"-\\\")\\r\\n    ,\\\" ตําบล\\/แขวง \\\",IFNULL(c.c_tambon,\\\"-\\\")\\r\\n    ,\\\" อําเภอ\\/เขต \\\",IFNULL(c.c_amphoe,\\\"-\\\")\\r\\n    ,\\\" จังหวัด \\\",IFNULL(c.c_province,\\\"-\\\")\\r\\n    ,\\\" รหัสไปรษณีย์ \\\",IFNULL(c.c_postalCode,\\\"-\\\")\\r\\n) AS postal\\r\\nFROM  app_fd_dgr_usage_license AS a\\r\\nLEFT JOIN app_fd_dgr_revision_license AS b\\r\\nON a.id = b.c_licenseID\\r\\nLEFT JOIN app_fd_dgr_well AS c\\r\\nON a.c_wellNo = c.c_wellNo\\r\\nLEFT JOIN app_fd_dgr_licensee AS d\\r\\nON a.c_licenseeID = d.id\\r\\nWHERE b.id = '#process.recordId#'\\r\\nUNION\\r\\nSELECT\\r\\na.c_drillLicenseName AS licenseeFullname\\r\\n,b.c_licenseType AS licenseType\\r\\n,d.c_phoneNumber AS tel\\r\\n,d.c_fax AS faxNumber\\r\\n,d.c_email AS email\\r\\n,Concat(\\r\\n\\t\\\"เลขที่ \\\",IFNULL(c.c_addressNo, \\\"-\\\")\\r\\n    ,\\\" หมู่ที่ \\\",IFNULL(c.c_moo,\\\"-\\\")\\r\\n    ,\\\" ตรอก\\/ซอย \\\",IFNULL(c.c_soi,\\\"-\\\")\\r\\n    ,\\\" ถนน \\\",IFNULL(c.c_street,\\\"-\\\")\\r\\n    ,\\\" ตําบล\\/แขวง \\\",IFNULL(c.c_tambon,\\\"-\\\")\\r\\n    ,\\\" อําเภอ\\/เขต \\\",IFNULL(c.c_amphoe,\\\"-\\\")\\r\\n    ,\\\" จังหวัด \\\",IFNULL(c.c_province,\\\"-\\\")\\r\\n    ,\\\" รหัสไปรษณีย์ \\\",IFNULL(c.c_postalCode,\\\"-\\\")\\r\\n) AS postal\\r\\nFROM  app_fd_dgr_drill_license AS a\\r\\nLEFT JOIN app_fd_dgr_revision_license AS b\\r\\nON a.id = b.c_licenseID\\r\\nLEFT JOIN app_fd_dgr_well AS c\\r\\nON a.c_wellNo = c.c_wellNo\\r\\nLEFT JOIN app_fd_dgr_licensee AS d\\r\\nON a.c_licenseeID = d.id\\r\\nWHERE b.id = '#process.recordId#'\",\"autoHandleFiles\":\"\"}},\"formDefId\":\"acceptEditLicenseGW\",\"noframe\":\"\",\"subFormParentId\":\"parentID\",\"id\":\"subAcceptRegister\",\"label\":\"\",\"storeBinder\":{\"className\":\"org.joget.apps.form.lib.WorkflowFormBinder\",\"properties\":{}},\"readonlyLabel\":\"\"}}],\"className\":\"org.joget.apps.form.model.Column\",\"properties\":{\"width\":\"100%\"}}],\"className\":\"org.joget.apps.form.model.Section\",\"properties\":{\"visibilityControl\":\"\",\"permissionReadonly\":\"\",\"permission\":{\"className\":\"\",\"properties\":{}},\"label\":\"\",\"reverse\":\"\",\"storeBinder\":{\"className\":\"\",\"properties\":{}},\"visibilityValue\":\"\",\"regex\":\"\",\"readonly\":\"\",\"loadBinder\":{\"className\":\"\",\"properties\":{}},\"comment\":\"\",\"id\":\"section5_1\",\"join\":\"\",\"readonlyLabel\":\"\"}},{\"elements\":[{\"elements\":[{\"className\":\"org.joget.apps.form.lib.HiddenField\",\"properties\":{\"useDefaultWhenEmpty\":\"\",\"workflowVariable\":\"\",\"id\":\"status\",\"value\":\"\"}},{\"className\":\"org.joget.apps.form.lib.HiddenField\",\"properties\":{\"useDefaultWhenEmpty\":\"\",\"workflowVariable\":\"\",\"id\":\"remarks\",\"value\":\"\"}},{\"className\":\"org.joget.apps.form.lib.CustomHTML\",\"properties\":{\"autoPopulate\":\"\",\"id\":\"javascriptRadio\",\"label\":\"\",\"value\":\"<script>\\r\\n    $(document).ready(function() {\\r\\n        var $select_value = $(\\\"input[name$='statusDoc']:checked\\\").val();\\r\\n        \\/\\/ console.log($select_value);\\r\\n        \\r\\n        if($select_value == \\\"complete\\\"){\\r\\n            $(\\\"input[name$='status']\\\").val(\\\"Accept request\\\");\\r\\n            $(\\\"input[name$='remarks']\\\").val(\\\"เอกสารหรือหลักฐานถูกต้องครบถ้วน\\\");\\r\\n        }else{\\r\\n            $(\\\"input[name$='status']\\\").val(\\\"#envVariable.moreInfo#\\\");\\r\\n            $(\\\"input[name$='remarks']\\\").val(\\\"เอกสารหรือหลักฐานไม่ถูกต้องครบถ้วน ให้ผู้ขอรับใบอนุญาตแก้ไขเพิ่มเติม หรือยื่นเอกสารหรือ หลักฐานเพิ่มเติมให้ถูกต้องครบถ้วน\\\");\\r\\n        }\\r\\n        \\r\\n        \\r\\n        $(\\\"input[name$='reviewerRemarks']\\\").val(\\\"\\\");\\r\\n        \\r\\n    });  \\r\\n    $(document).on(\\\"change\\\", \\\"[name$='statusDoc']\\\", function () {\\r\\n        var $select_value = $(\\\"input[name$='statusDoc']:checked\\\").val();\\r\\n        \\/\\/ console.log($select_value);\\r\\n\\r\\n        if($select_value == \\\"complete\\\"){\\r\\n            $(\\\"input[name$='status']\\\").val(\\\"Accept request\\\");\\r\\n            $(\\\"input[name$='remarks']\\\").val(\\\"เอกสารหรือหลักฐานถูกต้องครบถ้วน\\\");\\r\\n        }else{\\r\\n            $(\\\"input[name$='status']\\\").val(\\\"#envVariable.moreInfo#\\\");\\r\\n            $(\\\"input[name$='remarks']\\\").val(\\\"เอกสารหรือหลักฐานไม่ถูกต้องครบถ้วน\\\");\\r\\n        }\\r\\n    });\\r\\n\\r\\n    $(\\\"textarea[name$='remarkDoc']\\\").bind('change keyup paste', function(e) {\\r\\n        \\/\\/ console.log(this);\\r\\n        \\/\\/ var comment = $.trim($(\\\"textarea[name$='remarkDoc']\\\").val());\\r\\n        var comment = $(\\\"textarea[name$='remarkDoc']\\\").val();\\r\\n        \\/\\/ console.log(comment);\\r\\n        $(\\\"input[name$='question']\\\").val( comment );\\r\\n    });\\r\\n<\\/script>\"}}],\"className\":\"org.joget.apps.form.model.Column\",\"properties\":{\"width\":\"100%\"}}],\"className\":\"org.joget.apps.form.model.Section\",\"properties\":{\"visibilityControl\":\"\",\"permissionReadonly\":\"\",\"permission\":{\"className\":\"\",\"properties\":{}},\"label\":\"\",\"reverse\":\"\",\"storeBinder\":{\"className\":\"\",\"properties\":{}},\"visibilityValue\":\"\",\"regex\":\"\",\"readonly\":\"\",\"loadBinder\":{\"className\":\"\",\"properties\":{}},\"comment\":\"\",\"id\":\"section1\",\"join\":\"\",\"readonlyLabel\":\"\"}},{\"elements\":[{\"elements\":[{\"className\":\"org.joget.apps.form.lib.SubForm\",\"properties\":{\"parentSubFormId\":\"subQuestion\",\"readonly\":\"\",\"loadBinder\":{\"className\":\"org.joget.apps.form.lib.WorkflowFormBinder\",\"properties\":{}},\"formDefId\":\"questionHidden\",\"noframe\":\"true\",\"subFormParentId\":\"parentID\",\"id\":\"subQuestion\",\"label\":\"\",\"storeBinder\":{\"className\":\"org.joget.apps.form.lib.WorkflowFormBinder\",\"properties\":{}},\"readonlyLabel\":\"\"}}],\"className\":\"org.joget.apps.form.model.Column\",\"properties\":{\"width\":\"100%\"}}],\"className\":\"org.joget.apps.form.model.Section\",\"properties\":{\"visibilityControl\":\"subAcceptRegister.statusDoc\",\"permissionReadonly\":\"\",\"permission\":{\"className\":\"\",\"properties\":{}},\"label\":\"\",\"reverse\":\"\",\"storeBinder\":{\"className\":\"\",\"properties\":{}},\"visibilityValue\":\"incorrect\",\"regex\":\"\",\"readonly\":\"\",\"loadBinder\":{\"className\":\"\",\"properties\":{}},\"comment\":\"\",\"id\":\"section5\",\"join\":\"\",\"readonlyLabel\":\"\"}},{\"elements\":[{\"elements\":[{\"className\":\"org.joget.apps.form.lib.SubForm\",\"properties\":{\"parentSubFormId\":\"\",\"permissionHidden\":\"\",\"readonly\":\"true\",\"loadBinder\":{\"className\":\"org.joget.apps.form.lib.WorkflowFormBinder\",\"properties\":{}},\"formDefId\":\"trailForStaffNBT21\",\"noframe\":\"true\",\"subFormParentId\":\"\",\"id\":\"trail\",\"label\":\"\",\"storeBinder\":{\"className\":\"org.joget.apps.form.lib.WorkflowFormBinder\",\"properties\":{}},\"readonlyLabel\":\"true\"}}],\"className\":\"org.joget.apps.form.model.Column\",\"properties\":{\"elementUniqueKey\":\"5025\",\"width\":\"100%\"}}],\"className\":\"org.joget.apps.form.model.Section\",\"properties\":{\"visibilityControl\":\"\",\"permissionReadonly\":\"\",\"permission\":{\"className\":\"\",\"properties\":{}},\"label\":\"\",\"reverse\":\"\",\"storeBinder\":{\"className\":\"\",\"properties\":{}},\"visibilityValue\":\"\",\"regex\":\"\",\"loadBinder\":{\"className\":\"\",\"properties\":{}},\"readonly\":\"\",\"elementUniqueKey\":\"5021\",\"comment\":\"\",\"id\":\"section2_1\",\"join\":\"\",\"readonlyLabel\":\"\"}}]}","dateModified":"2020-05-26 22:55:17"}
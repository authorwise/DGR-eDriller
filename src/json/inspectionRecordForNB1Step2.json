{"formId":"inspectionRecordForNB1Step2","name":"[นบ.1] ฟอร์ม ต.1 บันทึกการตรวจสอบ (เจ้าหน้าพิเศษ)","json":"{\"className\":\"org.joget.apps.form.model.Form\",\"properties\":{\"noPermissionMessage\":\"\",\"loadBinder\":{\"className\":\"org.joget.apps.form.lib.WorkflowFormBinder\",\"properties\":{}},\"name\":\"[นบ.1] ฟอร์ม ต.1 บันทึกการตรวจสอบ (เจ้าหน้าพิเศษ)\",\"description\":\"\",\"postProcessorRunOn\":\"both\",\"permission\":{\"className\":\"\",\"properties\":{}},\"id\":\"inspectionRecordForNB1Step2\",\"postProcessor\":{\"className\":\"org.joget.apps.app.lib.DatabaseUpdateTool\",\"properties\":{\"query\":\"INSERT INTO `app_fd_dgr_regis_license_a`\\r\\n(`id`,\\r\\n`dateCreated`,\\r\\n`dateModified`,\\r\\n`createdBy`,\\r\\n`createdByName`,\\r\\n`modifiedBy`,\\r\\n`modifiedByName`,\\r\\n`c_approver`,\\r\\n`c_approval_date`,\\r\\n`c_parent_id`,\\r\\n`c_remarks`,\\r\\n`c_status`,\\r\\n`c_activityID`,\\r\\n`c_activityDefID`,\\r\\n`c_processID`,\\r\\n`c_activityName`)\\r\\nVALUES\\r\\n(uuid(),\\r\\nnow(),\\r\\nnow(),\\r\\n\\\"#currentUser.username#\\\",\\r\\n\\\"#currentUser.fullName#\\\",\\r\\n\\\"#currentUser.username#\\\",\\r\\n\\\"#currentUser.fullName#\\\",\\r\\n\\\"#currentUser.username#\\\",\\r\\nnow(),\\r\\n\\\"#form.dgr_regis_license.id#\\\",\\r\\n\\\"#form.dgr_regis_license.remarks#\\\",\\r\\n\\\"#form.dgr_regis_license.status#\\\",\\r\\n\\\"#assignment.activityId#\\\",\\r\\n\\\"#assignment.activityDefId#\\\",\\r\\n\\\"#assignment.processId#\\\",\\r\\n\\\"#assignment.activityName#\\\");\",\"jdbcDatasource\":\"default\"}},\"storeBinder\":{\"className\":\"org.joget.apps.form.lib.WorkflowFormBinder\",\"properties\":{}},\"tableName\":\"dgr_regis_license\"},\"elements\":[{\"elements\":[{\"elements\":[{\"className\":\"org.joget.apps.form.lib.HiddenField\",\"properties\":{\"useDefaultWhenEmpty\":\"\",\"workflowVariable\":\"status\",\"id\":\"status\",\"value\":\"Inspection record\"}},{\"className\":\"org.joget.apps.form.lib.HiddenField\",\"properties\":{\"useDefaultWhenEmpty\":\"\",\"workflowVariable\":\"\",\"id\":\"remarks\",\"value\":\"บันทึกการตรวจสอบสถานที่เรียบร้อย\"}}],\"className\":\"org.joget.apps.form.model.Column\",\"properties\":{\"width\":\"100%\"}}],\"className\":\"org.joget.apps.form.model.Section\",\"properties\":{\"visibilityControl\":\"\",\"permissionReadonly\":\"\",\"permission\":{\"className\":\"\",\"properties\":{}},\"label\":\"\",\"reverse\":\"\",\"storeBinder\":{\"className\":\"\",\"properties\":{}},\"visibilityValue\":\"\",\"regex\":\"\",\"readonly\":\"\",\"loadBinder\":{\"className\":\"\",\"properties\":{}},\"comment\":\"\",\"id\":\"section1_1\",\"join\":\"\",\"readonlyLabel\":\"\"}},{\"elements\":[{\"elements\":[{\"className\":\"org.joget.apps.form.lib.SubForm\",\"properties\":{\"id\":\"subReportT1step2\",\"label\":\"\",\"formDefId\":\"inspectionRecord\",\"readonly\":\"\",\"readonlyLabel\":\"\",\"noframe\":\"true\",\"parentSubFormId\":\"subReportT1step2\",\"subFormParentId\":\"parentID\",\"loadBinder\":{\"className\":\"org.joget.tutorial.JdbcLoadBinder\",\"properties\":{\"jdbcDatasource\":\"default\",\"sql\":\"SELECT\\r\\nb.id \\r\\n,CASE\\r\\n    WHEN a.c_subReportT1 <> \\\"\\\" THEN b.c_licenseeFullname \\r\\n    ELSE a.c_drillLicenseeFullname\\r\\nEND AS licenseeFullname\\r\\n,CASE\\r\\n    WHEN a.c_subReportT1 <> \\\"\\\" THEN b.c_addressNo\\r\\n    ELSE a.c_addressNo\\r\\nEND AS addressNo\\r\\n,CASE\\r\\n    WHEN a.c_subReportT1 <> \\\"\\\" THEN b.c_moo\\r\\n    ELSE a.c_moo\\r\\nEND AS moo\\r\\n,CASE\\r\\n    WHEN a.c_subReportT1 <> \\\"\\\" THEN b.c_soi\\r\\n    ELSE a.c_soi\\r\\nEND AS soi\\r\\n,CASE\\r\\n    WHEN a.c_subReportT1 <> \\\"\\\" THEN b.c_street\\r\\n    ELSE a.c_street\\r\\nEND AS street\\r\\n,CASE\\r\\n    WHEN a.c_subReportT1 <> \\\"\\\" THEN b.c_tambon\\r\\n    ELSE a.c_tambon\\r\\nEND AS tambon\\r\\n,CASE\\r\\n    WHEN a.c_subReportT1 <> \\\"\\\" THEN b.c_amphoe\\r\\n    ELSE a.c_amphoe\\r\\nEND AS amphoe\\r\\n,CASE\\r\\n    WHEN a.c_subReportT1 <> \\\"\\\" THEN b.c_province\\r\\n    ELSE a.c_province\\r\\nEND AS province\\r\\n,CASE\\r\\n    WHEN a.c_subReportT1 <> \\\"\\\" THEN b.c_postalCode\\r\\n    ELSE a.c_postalCode\\r\\nEND AS postalCode\\r\\n,CASE\\r\\n    WHEN a.c_subReportT1 <> \\\"\\\" THEN b.c_phoneNumber\\r\\n    ELSE a.c_wellPhoneNumber\\r\\nEND AS phoneNumber\\r\\n,CASE\\r\\n    WHEN a.c_subReportT1 <> \\\"\\\" THEN b.c_fax\\r\\n    ELSE a.c_wellFax\\r\\nEND AS fax\\r\\n\\r\\n,b.c_kmAt AS kmAt\\r\\n,b.c_actuallyUseWater AS actuallyUseWater\\r\\n,b.c_additionalNote AS additionalNote\\r\\n,b.c_amountWaterInLicense AS amountWaterInLicense\\r\\n,b.c_considerType AS considerType\\r\\n,b.c_distance AS distance\\r\\n,b.c_environment AS environment\\r\\n,b.c_environmentOther AS environmentOther\\r\\n,b.c_gaugeSize1 AS gaugeSize1\\r\\n,b.c_gaugeSize2 AS gaugeSize2\\r\\n,b.c_gaugeSize3 AS gaugeSize3\\r\\n,b.c_gaugeSize4 AS gaugeSize4\\r\\n,b.c_groundwaterCondition1 AS groundwaterCondition1\\r\\n,b.c_groundwaterCondition2 AS groundwaterCondition2\\r\\n,b.c_groundwaterCondition3 AS groundwaterCondition3\\r\\n,b.c_groundwaterCondition4 AS groundwaterCondition4\\r\\n,b.c_groundwaterCondition5 AS groundwaterCondition5\\r\\n,b.c_groundwaterCondition6 AS groundwaterCondition6\\r\\n,b.c_groundwaterCondition7 AS groundwaterCondition7\\r\\n,b.c_groundwaterCondition8 AS groundwaterCondition8\\r\\n,b.c_groundwaterP AS groundwaterP\\r\\n,b.c_groundwaterProductionCapacity1 AS groundwaterProductionCapacity1\\r\\n,b.c_groundwaterProductionCapacity2 AS groundwaterProductionCapacity2\\r\\n,b.c_groundwaterUseCondition1 AS groundwaterUseCondition1\\r\\n,b.c_groundwaterUseCondition2 AS groundwaterUseCondition2\\r\\n,b.c_groundwaterUseCondition3 AS groundwaterUseCondition3\\r\\n,b.c_groundwaterUseCondition4 AS groundwaterUseCondition4\\r\\n,b.c_groundwaterUseCondition5 AS groundwaterUseCondition5\\r\\n,b.c_hostName AS hostName\\r\\n,b.c_hostPosition AS hostPosition\\r\\n,b.c_hostSignature AS hostSignature\\r\\n,b.c_impact AS impact\\r\\n,b.c_impactOther AS impactOther\\r\\n,b.c_inspectionImage AS inspectionImage\\r\\n,b.c_inspectionRemark AS inspectionRemark\\r\\n,b.c_inspectorPosition AS inspectorPosition\\r\\n,CASE\\r\\n    WHEN a.c_subReportT1 <> \\\"\\\" THEN b.c_inspectorName\\r\\n    ELSE \\\"#currentUser.fullName#\\\"\\r\\nEND AS inspectorName\\r\\n,CASE\\r\\n    WHEN a.c_subReportT1 <> \\\"\\\" THEN b.c_inspectorSignature\\r\\n    ELSE \\\"\\/jw\\/web\\/client\\/app\\/jusermgnt6\\/3\\/form\\/download\\/setupUserAdditonal\\/#currentUser.username#\\/#form.user_additional.userSignature[{currentUser.username}]#.\\\"\\r\\nEND AS inspectorSignature\\r\\n,CASE\\r\\n    WHEN a.c_subReportT1 <> \\\"\\\" THEN b.c_location\\r\\n    ELSE (\\r\\n        Concat(\\r\\n            \\\"เลขที่ \\\",IFNULL(a.c_addressNo, \\\"-\\\")\\r\\n            ,\\\" หมู่ที่ \\\",IFNULL(a.c_moo,\\\"-\\\")\\r\\n            ,\\\" ตรอก\\/ซอย \\\",IFNULL(a.c_soi,\\\"-\\\")\\r\\n            ,\\\" ถนน \\\",IFNULL(a.c_street,\\\"-\\\")\\r\\n            ,\\\" ตําบล\\/แขวง \\\",IFNULL(a.c_tambon,\\\"-\\\")\\r\\n            ,\\\" อําเภอ\\/เขต \\\",IFNULL(a.c_amphoe,\\\"-\\\")\\r\\n            ,\\\" จังหวัด \\\",IFNULL(a.c_province,\\\"-\\\")\\r\\n            ,\\\" รหัสไปรษณีย์ \\\",IFNULL(a.c_postalCode,\\\"-\\\")\\r\\n        )\\r\\n    )\\r\\nEND AS location\\r\\n\\r\\n,b.c_locationCondition1 AS locationCondition1\\r\\n,b.c_locationCondition2 AS locationCondition2\\r\\n,b.c_locationCondition3 AS locationCondition3\\r\\n,b.c_locationCondition4 AS locationCondition4\\r\\n,b.c_locationCondition5 AS locationCondition5\\r\\n,b.c_locationCondition6 AS locationCondition6\\r\\n,b.c_locationCondition7 AS locationCondition7\\r\\n,b.c_locationCondition8 AS locationCondition8\\r\\n,b.c_locationConditionOther AS locationConditionOther\\r\\n,b.c_locationMapWell AS locationMapWell\\r\\n,b.c_parentID AS parentID\\r\\n,b.c_payTapWater1 AS payTapWater1\\r\\n,b.c_payTapWater2 AS payTapWater2\\r\\n,b.c_payTapWater3 AS payTapWater3\\r\\n,b.c_physicalQuality AS physicalQuality\\r\\n,b.c_processID AS processID\\r\\n,b.c_reasonNotUseTapWater AS reasonNotUseTapWater\\r\\n,CASE\\r\\n    WHEN a.c_subReportT1 <> \\\"\\\" THEN b.c_recordDate\\r\\n    ELSE \\\"#date.dd\\/MM\\/yyyy HH:mm#\\\"\\r\\nEND AS recordDate\\r\\n\\r\\n,CASE\\r\\n    WHEN a.c_subReportT1 <> \\\"\\\" THEN b.c_staff1\\r\\n    ELSE \\\"#currentUser.fullName#\\\"\\r\\nEND AS staff1\\r\\n,b.c_staff2 AS staff2\\r\\n,b.c_staff3 AS staff3\\r\\n,b.c_staff4 AS staff4\\r\\n,b.c_suitability AS suitability\\r\\n,b.c_suitabilityReason AS suitabilityReason\\r\\n,b.c_tapWaterUsage1 AS tapWaterUsage1\\r\\n,b.c_tapWaterUsage2 AS tapWaterUsage2\\r\\n,b.c_tapWaterUsage3 AS tapWaterUsage3\\r\\n,b.c_tapWaterUsage4 AS tapWaterUsage4\\r\\n,b.c_tapWaterUsage5 AS tapWaterUsage5\\r\\n,b.c_useTapWater1 AS useTapWater1\\r\\n,b.c_useTapWater2 AS useTapWater2\\r\\n,b.c_useTapWater3 AS useTapWater3\\r\\n,b.c_waterAnalysis AS waterAnalysis\\r\\n,b.c_waterMeterFee1 AS waterMeterFee1\\r\\n,b.c_waterMeterFee2 AS waterMeterFee2\\r\\n,b.c_waterMeterFee3 AS waterMeterFee3\\r\\n,b.c_waterMeterNumber1 AS waterMeterNumber1\\r\\n,b.c_waterMeterNumber2 AS waterMeterNumber2\\r\\n,b.c_waterMeterNumber3 AS waterMeterNumber3\\r\\n,b.c_waterP AS waterP\\r\\n,b.c_waterProductionCapacity1 AS waterProductionCapacity1\\r\\n,b.c_waterProductionCapacity2 AS waterProductionCapacity2\\r\\n,b.c_waterSupplyAmount AS waterSupplyAmount\\r\\n,b.c_waterworks AS waterworks\\r\\n,b.c_waterworksService AS waterworksService\\r\\n,b.c_waterworksServiceArea AS waterworksServiceArea\\r\\n,b.c_waterworksServiceAreaOther AS waterworksServiceAreaOther\\r\\n,b.c_waterworksUse AS waterworksUse\\r\\n,b.c_witnessName1 AS witnessName1\\r\\n,b.c_witnessName2 AS witnessName2\\r\\n,b.c_witnessPosition1 AS witnessPosition1\\r\\n,b.c_witnessPosition2 AS witnessPosition2\\r\\n,b.c_witnessSignature1 AS witnessSignature1\\r\\n,b.c_witnessSignature2 AS witnessSignature2\\r\\n,CASE \\r\\n    WHEN b.c_activityDefID = \\\"locationInspection1\\\" THEN \\\"ตรวจสอบก่อนพิจารณาออกใบอนุญาต\\\"\\r\\n    WHEN b.c_activityDefID = \\\"locationInspection2\\\" THEN \\\"ตรวจสอบเพิ่มเติมระหว่างพิจารณาระหว่างพิจารณา\\\"\\r\\n    WHEN b.c_activityDefID = \\\"locationInspection3\\\" THEN \\\"ตรวจสอบหลังพิจารณาออกใบอนุญาต\\\"\\r\\n ELSE 'ไม่พบข้อมูล' END AS stepCreate\\r\\n\\r\\n,CASE \\r\\n    WHEN b.id <> \\\"\\\" THEN \\\"no\\\"\\r\\n ELSE 'yes' END AS newRec\\r\\n\\r\\nFROM app_fd_dgr_regis_license AS a\\r\\nLEFT JOIN app_fd_dgr_inspection AS b\\r\\nON a.c_subReportT1step2 = b.id\\r\\nWHERE a.id = \\\"#process.recordId#\\\";\",\"autoHandleWorkflowVariable\":\"true\",\"autoHandleFiles\":\"\"}},\"storeBinder\":{\"className\":\"org.joget.apps.form.lib.WorkflowFormBinder\",\"properties\":{}}}}],\"className\":\"org.joget.apps.form.model.Column\",\"properties\":{\"width\":\"100%\"}}],\"className\":\"org.joget.apps.form.model.Section\",\"properties\":{\"visibilityControl\":\"\",\"permissionReadonly\":\"\",\"permission\":{\"className\":\"\",\"properties\":{}},\"label\":\"\",\"reverse\":\"\",\"storeBinder\":{\"className\":\"\",\"properties\":{}},\"visibilityValue\":\"\",\"regex\":\"\",\"readonly\":\"\",\"loadBinder\":{\"className\":\"\",\"properties\":{}},\"comment\":\"\",\"id\":\"section1\",\"join\":\"\",\"readonlyLabel\":\"\"}},{\"elements\":[{\"elements\":[{\"className\":\"org.joget.apps.form.lib.SubForm\",\"properties\":{\"parentSubFormId\":\"\",\"permissionHidden\":\"\",\"readonly\":\"true\",\"loadBinder\":{\"className\":\"org.joget.apps.form.lib.WorkflowFormBinder\",\"properties\":{}},\"noframe\":\"true\",\"formDefId\":\"trailForStaffNB1\",\"subFormParentId\":\"\",\"label\":\"\",\"id\":\"trail\",\"storeBinder\":{\"className\":\"org.joget.apps.form.lib.WorkflowFormBinder\",\"properties\":{}},\"readonlyLabel\":\"true\"}}],\"className\":\"org.joget.apps.form.model.Column\",\"properties\":{\"elementUniqueKey\":\"5025\",\"width\":\"100%\"}}],\"className\":\"org.joget.apps.form.model.Section\",\"properties\":{\"visibilityControl\":\"\",\"permissionReadonly\":\"\",\"permission\":{\"className\":\"\",\"properties\":{}},\"label\":\"\",\"reverse\":\"\",\"storeBinder\":{\"className\":\"\",\"properties\":{}},\"visibilityValue\":\"\",\"regex\":\"\",\"loadBinder\":{\"className\":\"\",\"properties\":{}},\"readonly\":\"\",\"elementUniqueKey\":\"5021\",\"comment\":\"\",\"id\":\"section2_1\",\"join\":\"\",\"readonlyLabel\":\"\"}}]}","dateModified":"2020-05-14 10:56:25"}